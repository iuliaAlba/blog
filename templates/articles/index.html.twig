{% extends 'base.html.twig' %}


{% block title %}Articles de propagande
{% endblock %}

{% block body %}
<section id="hero" class="d-flex flex-column justify-content-center">
	<!-- Main Content -->
	{% for message in app.flashes('message') %}
		<div class="alert alert-success" role="alert">
			{{message}}
		</div>
	{% endfor %}
	<section id="contact" class="contact">
		<div class="section-title">
			<h2>Articles de propagande</h2>
		</div>
		<div
			class="container" data-aos="fade-up" style="width:auto;  ">

			{# <div class="col-lg-10 col-md-10 mx-auto"> #}
			{% for article in articles %}
				<div class="row mt-1" style="width:auto">
					<div class="d-flex justify-content-between">
						<div class="col-lg-3">
							{# <img src="{{ vich_uploader_asset(article, 'imageFile') }}" alt="" class="img-fluid" style=' width: 40%; object-fit: contain; display: table-cell; vertical-align: middle;'/> #}
							<img src="{{ vich_uploader_asset(article, 'imageFile')|imagine_filter('carre') }}" alt="" class="img-fluid" style='width: 100%;  object-fit: contain; display: table-cell; vertical-align: middle;'/>
						{# style='height: 30%; width: 30%; object-fit: contain'/> #}
						</div>
						{# <img
																			src="{{ vich_uploader_asset(article, 'imageFile') |imagine_filter('carre')}}"  alt="" /> #}
						<div class="post-preview">

							<a href="{{ path('articles_show', {'slug': article.slug}) }}">

								<h2 class="post-title">{{ article.titre }}</h2>
								<h3
									class="post-subtitle">
									{# {% for categorie in article.categories %}
																																														{{ categorie.nom }}
																																												{% endfor %} #}
									{{ article.contenu|striptags|truncate(200)|raw }}
								{# {% set texte = {article.contenu|raw} %} #}
									{# {{texte}} #}
									{# |split('.')|first|raw}} #}

								</h3>
							</a>
							<div class="d-flex justify-content-between">
								<div>

									<p style="font-size: 20px;" class="post-meta">Post√© par
										<a style="color: #058f3e;" href="#">{{article.users }}</a>
										le
										{{ article.createdAt ? article.createdAt|date('Y-m-d H:i:s') : '' }}</p>

								</div>
								{% if is_granted('ROLE_ADMIN') or is_granted('ROLE_EDITOR') %}
									<div class="clearfix">
										<a class="btn btn-primary float-right" href="{{ path('articles_edit', {'id': article.id}) }}">edit</a>
									</div>
								{% endif %}
							</div>
						</div>

					</div>

				</div>
				<hr>


			{% else %}
				<tr>
					<td colspan="8">no records found</td>
				</tr>
			{% endfor %}


			<!-- Pager -->
			
				{% if is_granted('ROLE_ADMIN')  or is_granted('ROLE_EDITOR') %}
					<div class="center">
							<div class="text-center">
					{# <div class="row mt-1"> #}
						
								<a class="btn btn-primary " href="{{ path('articles_new') }}">Create new</a>
							</div>
						{# </div> #}
					</div>
				{% endif %}
				{# <div class="row mt-1"> #}
					<div class="center">
						<div class="text-center">
							<div class="navigation"> {{ knp_pagination_render(articles) }}</div>
						</div>
					{# </div> #}
					</div>

		</div>
	</section>
</section>

{% endblock %}
